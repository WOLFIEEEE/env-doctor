"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[801],{3193(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"features/type-checking","title":"Type Checking","description":"Detect type mismatches between how variables are used and their actual values.","source":"@site/docs/features/type-checking.md","sourceDirName":"features","slug":"/features/type-checking","permalink":"/env-doctor/docs/features/type-checking","draft":false,"unlisted":false,"editUrl":"https://github.com/khushwantparihar/env-doctor/tree/main/docs/docs/features/type-checking.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Unused Variable Detection","permalink":"/env-doctor/docs/features/unused-vars"},"next":{"title":"Secret Detection","permalink":"/env-doctor/docs/features/secret-detection"}}');var i=s(4848),t=s(8453);const d={sidebar_position:3},c="Type Checking",l={},a=[{value:"How It Works",id:"how-it-works",level:2},{value:"Example Output",id:"example-output",level:2},{value:"Explicit Type Rules",id:"explicit-type-rules",level:2},{value:"Supported Types",id:"supported-types",level:2},{value:"Pattern Validation",id:"pattern-validation",level:2},{value:"Enum Validation",id:"enum-validation",level:2},{value:"Auto-Inference",id:"auto-inference",level:2},{value:"Fixing Type Issues",id:"fixing-type-issues",level:2},{value:"Wrong Value",id:"wrong-value",level:3},{value:"Missing Validation",id:"missing-validation",level:3},{value:"False Positive",id:"false-positive",level:3},{value:"Best Practices",id:"best-practices",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"type-checking",children:"Type Checking"})}),"\n",(0,i.jsx)(n.p,{children:"Detect type mismatches between how variables are used and their actual values."}),"\n",(0,i.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsx)(n.p,{children:"env-doctor infers expected types from how variables are used in code:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Inferred as number\nconst port = parseInt(process.env.PORT, 10);\n\n// Inferred as boolean\nconst debug = process.env.DEBUG === 'true';\n\n// Inferred as JSON\nconst config = JSON.parse(process.env.CONFIG);\n\n// Inferred as array\nconst hosts = process.env.HOSTS.split(',');\n"})}),"\n",(0,i.jsx)(n.p,{children:"Then it validates the actual values match."}),"\n",(0,i.jsx)(n.h2,{id:"example-output",children:"Example Output"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'\u26a0 Type Mismatches (2 issues)\n\n  PORT\n    Variable "PORT" is used as a number at src/server.ts:5\n    but value "three thousand" is not numeric\n    at .env:3\n\n  CONFIG\n    Variable "CONFIG" is parsed as JSON at src/config.ts:12\n    but value is not valid JSON\n    at .env:8\n'})}),"\n",(0,i.jsx)(n.h2,{id:"explicit-type-rules",children:"Explicit Type Rules"}),"\n",(0,i.jsx)(n.p,{children:"Define expected types in your config:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// env-doctor.config.js\nmodule.exports = {\n  variables: {\n    PORT: {\n      type: 'number'\n    },\n    DEBUG: {\n      type: 'boolean'\n    },\n    API_URL: {\n      type: 'url'\n    },\n    ADMIN_EMAIL: {\n      type: 'email'\n    },\n    CONFIG: {\n      type: 'json'\n    }\n  }\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"supported-types",children:"Supported Types"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Valid Values"}),(0,i.jsx)(n.th,{children:"Example"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"string"})}),(0,i.jsx)(n.td,{children:"Any string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"hello world"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"number"})}),(0,i.jsx)(n.td,{children:"Numeric strings"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"3000"}),", ",(0,i.jsx)(n.code,{children:"3.14"}),", ",(0,i.jsx)(n.code,{children:"-42"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"boolean"})}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"true"}),", ",(0,i.jsx)(n.code,{children:"false"}),", ",(0,i.jsx)(n.code,{children:"1"}),", ",(0,i.jsx)(n.code,{children:"0"}),", ",(0,i.jsx)(n.code,{children:"yes"}),", ",(0,i.jsx)(n.code,{children:"no"})]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"json"})}),(0,i.jsx)(n.td,{children:"Valid JSON"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:'{"key": "value"}'})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"url"})}),(0,i.jsx)(n.td,{children:"Valid URL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"https://example.com"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"email"})}),(0,i.jsx)(n.td,{children:"Valid email"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user@example.com"})})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"pattern-validation",children:"Pattern Validation"}),"\n",(0,i.jsx)(n.p,{children:"Use regex patterns for custom validation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"variables: {\n  DATABASE_URL: {\n    pattern: /^postgres:\\/\\//\n  },\n  AWS_REGION: {\n    pattern: /^[a-z]{2}-[a-z]+-\\d$/\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"enum-validation",children:"Enum Validation"}),"\n",(0,i.jsx)(n.p,{children:"Restrict to specific values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"variables: {\n  NODE_ENV: {\n    enum: ['development', 'production', 'test']\n  },\n  LOG_LEVEL: {\n    enum: ['debug', 'info', 'warn', 'error']\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"auto-inference",children:"Auto-Inference"}),"\n",(0,i.jsx)(n.p,{children:"env-doctor infers types from common patterns:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Code Pattern"}),(0,i.jsx)(n.th,{children:"Inferred Type"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"parseInt(process.env.X)"})}),(0,i.jsx)(n.td,{children:"number"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"parseFloat(process.env.X)"})}),(0,i.jsx)(n.td,{children:"number"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Number(process.env.X)"})}),(0,i.jsx)(n.td,{children:"number"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"process.env.X === 'true'"})}),(0,i.jsx)(n.td,{children:"boolean"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"JSON.parse(process.env.X)"})}),(0,i.jsx)(n.td,{children:"json"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"process.env.X.split(',')"})}),(0,i.jsx)(n.td,{children:"array"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"fixing-type-issues",children:"Fixing Type Issues"}),"\n",(0,i.jsx)(n.h3,{id:"wrong-value",children:"Wrong Value"}),"\n",(0,i.jsxs)(n.p,{children:["Update the ",(0,i.jsx)(n.code,{children:".env"})," value:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Before\nPORT=three thousand\n\n# After\nPORT=3000\n"})}),"\n",(0,i.jsx)(n.h3,{id:"missing-validation",children:"Missing Validation"}),"\n",(0,i.jsx)(n.p,{children:"Add validation in your code:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const port = parseInt(process.env.PORT || '3000', 10);\nif (isNaN(port)) {\n  throw new Error('PORT must be a number');\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"false-positive",children:"False Positive"}),"\n",(0,i.jsx)(n.p,{children:"If the type inference is wrong, ignore it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"ignore: ['type-mismatch:MY_VAR']\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Define types explicitly"})," - Don't rely on inference alone"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Add runtime validation"})," - env-doctor catches issues early, but validate at runtime too"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use enums for limited values"})," - Prevents typos"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document expected formats"})," - Add descriptions to your config"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,s){s.d(n,{R:()=>d,x:()=>c});var r=s(6540);const i={},t=r.createContext(i);function d(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);