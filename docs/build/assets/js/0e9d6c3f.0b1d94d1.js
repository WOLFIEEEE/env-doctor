"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[195],{2818(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"features/missing-vars","title":"Missing Variable Detection","description":"Detect environment variables that are used in your code but not defined in your .env files.","source":"@site/docs/features/missing-vars.md","sourceDirName":"features","slug":"/features/missing-vars","permalink":"/env-doctor/docs/features/missing-vars","draft":false,"unlisted":false,"editUrl":"https://github.com/khushwantparihar/env-doctor/tree/main/docs/docs/features/missing-vars.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Configuration","permalink":"/env-doctor/docs/getting-started/configuration"},"next":{"title":"Unused Variable Detection","permalink":"/env-doctor/docs/features/unused-vars"}}');var r=i(4848),a=i(8453);const t={sidebar_position:1},l="Missing Variable Detection",c={},d=[{value:"How It Works",id:"how-it-works",level:2},{value:"Example Output",id:"example-output",level:2},{value:"Severity Levels",id:"severity-levels",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Marking Variables as Required",id:"marking-variables-as-required",level:3},{value:"Providing Defaults",id:"providing-defaults",level:3},{value:"Ignoring Variables",id:"ignoring-variables",level:3},{value:"Framework Considerations",id:"framework-considerations",level:2},{value:"Next.js",id:"nextjs",level:3},{value:"Vite",id:"vite",level:3},{value:"Fixing Missing Variables",id:"fixing-missing-variables",level:2},{value:"Interactive Fix",id:"interactive-fix",level:3},{value:"Manual Fix",id:"manual-fix",level:3},{value:"Update .env.example",id:"update-envexample",level:3},{value:"Dynamic Access Patterns",id:"dynamic-access-patterns",level:2},{value:"Best Practices",id:"best-practices",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"missing-variable-detection",children:"Missing Variable Detection"})}),"\n",(0,r.jsxs)(n.p,{children:["Detect environment variables that are used in your code but not defined in your ",(0,r.jsx)(n.code,{children:".env"})," files."]}),"\n",(0,r.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsxs)(n.p,{children:["env-doctor scans your source code for ",(0,r.jsx)(n.code,{children:"process.env"})," access patterns:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Direct access\nconst apiKey = process.env.API_KEY;\n\n// Bracket notation\nconst url = process.env['DATABASE_URL'];\n\n// Destructuring\nconst { SECRET_KEY } = process.env;\n\n// With fallback\nconst port = process.env.PORT || 3000;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["It then compares these with your ",(0,r.jsx)(n.code,{children:".env"})," files to find missing variables."]}),"\n",(0,r.jsx)(n.h2,{id:"example-output",children:"Example Output"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'\u2717 Missing Variables (2 issues)\n\n  DATABASE_URL\n    Variable "DATABASE_URL" is used in code but not defined in any .env file\n    at src/lib/db.ts:5\n\n  API_SECRET\n    Required variable "API_SECRET" is not defined in any .env file\n'})}),"\n",(0,r.jsx)(n.h2,{id:"severity-levels",children:"Severity Levels"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Severity"}),(0,r.jsx)(n.th,{children:"Condition"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Error"})}),(0,r.jsxs)(n.td,{children:["Variable is marked as ",(0,r.jsx)(n.code,{children:"required"})," in config"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Warning"})}),(0,r.jsx)(n.td,{children:"Variable is used but not defined"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"marking-variables-as-required",children:"Marking Variables as Required"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// env-doctor.config.js\nmodule.exports = {\n  variables: {\n    DATABASE_URL: {\n      required: true  // Will be an error if missing\n    },\n    OPTIONAL_VAR: {\n      required: false  // Will be a warning if missing\n    }\n  }\n};\n"})}),"\n",(0,r.jsx)(n.h3,{id:"providing-defaults",children:"Providing Defaults"}),"\n",(0,r.jsx)(n.p,{children:"Variables with defaults won't be reported as missing:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"variables: {\n  PORT: {\n    default: 3000  // Won't report as missing\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"ignoring-variables",children:"Ignoring Variables"}),"\n",(0,r.jsx)(n.p,{children:"Ignore specific variables or patterns:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"ignore: [\n  'LEGACY_*',           // Ignore all LEGACY_ variables\n  'missing:OPTIONAL_*', // Ignore missing for OPTIONAL_ variables\n]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"framework-considerations",children:"Framework Considerations"}),"\n",(0,r.jsx)(n.h3,{id:"nextjs",children:"Next.js"}),"\n",(0,r.jsxs)(n.p,{children:["Client-side variables must use ",(0,r.jsx)(n.code,{children:"NEXT_PUBLIC_"})," prefix:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Server-side only\nconst secret = process.env.DATABASE_URL;\n\n// Client-side accessible\nconst apiUrl = process.env.NEXT_PUBLIC_API_URL;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"vite",children:"Vite"}),"\n",(0,r.jsxs)(n.p,{children:["Client-side variables use ",(0,r.jsx)(n.code,{children:"VITE_"})," prefix:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const apiUrl = import.meta.env.VITE_API_URL;\n"})}),"\n",(0,r.jsx)(n.h2,{id:"fixing-missing-variables",children:"Fixing Missing Variables"}),"\n",(0,r.jsx)(n.h3,{id:"interactive-fix",children:"Interactive Fix"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx env-doctor fix\n"})}),"\n",(0,r.jsx)(n.p,{children:"This prompts you to:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Add the variable to ",(0,r.jsx)(n.code,{children:".env"})]}),"\n",(0,r.jsx)(n.li,{children:"Add to ignore list"}),"\n",(0,r.jsx)(n.li,{children:"Skip"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"manual-fix",children:"Manual Fix"}),"\n",(0,r.jsxs)(n.p,{children:["Add the missing variable to your ",(0,r.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# .env\nDATABASE_URL=postgres://localhost:5432/mydb\n"})}),"\n",(0,r.jsx)(n.h3,{id:"update-envexample",children:"Update .env.example"}),"\n",(0,r.jsx)(n.p,{children:"Keep your template in sync:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx env-doctor init --example-only\n"})}),"\n",(0,r.jsx)(n.h2,{id:"dynamic-access-patterns",children:"Dynamic Access Patterns"}),"\n",(0,r.jsx)(n.p,{children:"env-doctor detects dynamic access but can't determine the variable name:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// This triggers a warning\nconst key = getConfigKey();\nconst value = process.env[key];  // Dynamic access\n"})}),"\n",(0,r.jsx)(n.p,{children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\u26a0 Dynamic Access (1 issue)\n\n  <dynamic>\n    Dynamic environment variable access detected\n    at src/config.ts:15\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Define all variables in ",(0,r.jsx)(n.code,{children:".env.example"})]})," - Document what's needed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mark critical variables as required"})," - Catch missing early"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use defaults where appropriate"})," - Reduce configuration burden"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Review dynamic access warnings"})," - Consider if they can be made static"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>l});var s=i(6540);const r={},a=s.createContext(r);function t(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);