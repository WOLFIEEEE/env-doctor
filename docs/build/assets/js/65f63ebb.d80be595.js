"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[216],{2046(e,n,l){l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"features/sync-check","title":"Sync Check","description":"Keep your .env and .env.example files in sync.","source":"@site/docs/features/sync-check.md","sourceDirName":"features","slug":"/features/sync-check","permalink":"/env-doctor/docs/features/sync-check","draft":false,"unlisted":false,"editUrl":"https://github.com/khushwantparihar/env-doctor/tree/main/docs/docs/features/sync-check.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Secret Detection","permalink":"/env-doctor/docs/features/secret-detection"},"next":{"title":"Next.js","permalink":"/env-doctor/docs/frameworks/nextjs"}}');var i=l(4848),a=l(8453);const r={sidebar_position:5},t="Sync Check",d={},c=[{value:"Why Sync Matters",id:"why-sync-matters",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Example Output",id:"example-output",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Specify Template File",id:"specify-template-file",level:3},{value:"Multiple Environments",id:"multiple-environments",level:3},{value:"Auto-Generate Template",id:"auto-generate-template",level:2},{value:"Interactive Sync",id:"interactive-sync",level:2},{value:"CI Integration",id:"ci-integration",level:2},{value:"Template Best Practices",id:"template-best-practices",level:2},{value:"Include Examples",id:"include-examples",level:3},{value:"Group Related Variables",id:"group-related-variables",level:3},{value:"Document Required vs Optional",id:"document-required-vs-optional",level:3},{value:"Mask Sensitive Examples",id:"mask-sensitive-examples",level:3},{value:"Handling Drift",id:"handling-drift",level:2},{value:"New Variable Added",id:"new-variable-added",level:3},{value:"Variable Removed",id:"variable-removed",level:3},{value:"Variable Renamed",id:"variable-renamed",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"sync-check",children:"Sync Check"})}),"\n",(0,i.jsxs)(n.p,{children:["Keep your ",(0,i.jsx)(n.code,{children:".env"})," and ",(0,i.jsx)(n.code,{children:".env.example"})," files in sync."]}),"\n",(0,i.jsx)(n.h2,{id:"why-sync-matters",children:"Why Sync Matters"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:".env.example"})," serves as documentation for your project:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Shows what variables are needed"}),"\n",(0,i.jsx)(n.li,{children:"Provides example values"}),"\n",(0,i.jsx)(n.li,{children:"Helps onboard new developers"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"When it's out of sync, developers miss required variables."}),"\n",(0,i.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsxs)(n.p,{children:["env-doctor compares your ",(0,i.jsx)(n.code,{children:".env"})," files against ",(0,i.jsx)(n.code,{children:".env.example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# .env\nDATABASE_URL=postgres://localhost/mydb\nAPI_KEY=abc123\nNEW_FEATURE_FLAG=true  # Missing from example\n\n# .env.example\nDATABASE_URL=postgres://user:pass@localhost/db\nAPI_KEY=\nOLD_VARIABLE=          # Missing from .env\n"})}),"\n",(0,i.jsx)(n.h2,{id:"example-output",children:"Example Output"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"\u26a0 Sync Drift (2 issues)\n\n  NEW_FEATURE_FLAG\n    Variable is defined in .env but not in .env.example\n    at .env:3\n    fix: Add NEW_FEATURE_FLAG= to .env.example\n\n\u2139 Sync Drift (1 issue)\n\n  OLD_VARIABLE\n    Variable is in .env.example but not defined in .env\n    at .env.example:4\n    fix: Add OLD_VARIABLE= to your .env file\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"specify-template-file",children:"Specify Template File"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// env-doctor.config.js\nmodule.exports = {\n  envFiles: ['.env', '.env.local'],\n  templateFile: '.env.example'  // Compare against this\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"multiple-environments",children:"Multiple Environments"}),"\n",(0,i.jsx)(n.p,{children:"For environment-specific templates:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"templateFile: '.env.example'  // Base template\n\n// Or target specific environment\n// npx env-doctor --env production\n"})}),"\n",(0,i.jsx)(n.h2,{id:"auto-generate-template",children:"Auto-Generate Template"}),"\n",(0,i.jsxs)(n.p,{children:["Generate ",(0,i.jsx)(n.code,{children:".env.example"})," from your code:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx env-doctor init --example-only\n"})}),"\n",(0,i.jsx)(n.p,{children:"This creates a template with:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All variables used in code"}),"\n",(0,i.jsx)(n.li,{children:"Grouped by prefix"}),"\n",(0,i.jsx)(n.li,{children:"Comments for each section"}),"\n",(0,i.jsx)(n.li,{children:"Secrets left empty"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Example output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Environment Variables Template\n# Copy this file to .env and fill in the values\n\n# Database\nDATABASE_URL=postgres://user:pass@localhost:5432/db\n\n# API\nAPI_KEY=\nAPI_SECRET=\n\n# Next Public\nNEXT_PUBLIC_API_URL=https://api.example.com\n\n# App\nNODE_ENV=development\nPORT=3000\n"})}),"\n",(0,i.jsx)(n.h2,{id:"interactive-sync",children:"Interactive Sync"}),"\n",(0,i.jsx)(n.p,{children:"Use fix mode to sync interactively:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx env-doctor fix\n"})}),"\n",(0,i.jsx)(n.p,{children:"Options:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Add missing variables to ",(0,i.jsx)(n.code,{children:".env.example"})]}),"\n",(0,i.jsxs)(n.li,{children:["Add missing variables to ",(0,i.jsx)(n.code,{children:".env"})]}),"\n",(0,i.jsx)(n.li,{children:"Skip"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ci-integration",children:"CI Integration"}),"\n",(0,i.jsx)(n.p,{children:"Fail CI if files are out of sync:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"- name: Check env sync\n  run: npx env-doctor --ci\n"})}),"\n",(0,i.jsx)(n.h2,{id:"template-best-practices",children:"Template Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"include-examples",children:"Include Examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Good - shows format\nDATABASE_URL=postgres://user:pass@localhost:5432/db\nAPI_URL=https://api.example.com\n\n# Avoid - no guidance\nDATABASE_URL=\nAPI_URL=\n"})}),"\n",(0,i.jsx)(n.h3,{id:"group-related-variables",children:"Group Related Variables"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Database\nDATABASE_URL=postgres://localhost/db\nDATABASE_POOL_SIZE=10\n\n# External APIs\nSTRIPE_API_KEY=\nSTRIPE_WEBHOOK_SECRET=\n\n# Feature Flags\nENABLE_NEW_FEATURE=false\n"})}),"\n",(0,i.jsx)(n.h3,{id:"document-required-vs-optional",children:"Document Required vs Optional"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Required\nDATABASE_URL=postgres://localhost/db\nAPI_KEY=\n\n# Optional (has defaults)\n# PORT=3000\n# DEBUG=false\n"})}),"\n",(0,i.jsx)(n.h3,{id:"mask-sensitive-examples",children:"Mask Sensitive Examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Don't expose real formats\nAPI_KEY=                          # Good\nAPI_KEY=sk_test_...               # Okay for test keys\nAPI_KEY=sk_live_abc123            # Bad - real key format\n"})}),"\n",(0,i.jsx)(n.h2,{id:"handling-drift",children:"Handling Drift"}),"\n",(0,i.jsx)(n.h3,{id:"new-variable-added",children:"New Variable Added"}),"\n",(0,i.jsx)(n.p,{children:"When you add a new env variable:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Add to ",(0,i.jsx)(n.code,{children:".env"})," with your value"]}),"\n",(0,i.jsxs)(n.li,{children:["Add to ",(0,i.jsx)(n.code,{children:".env.example"})," with placeholder"]}),"\n",(0,i.jsx)(n.li,{children:"Commit both files"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"variable-removed",children:"Variable Removed"}),"\n",(0,i.jsx)(n.p,{children:"When removing a variable:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Remove from code"}),"\n",(0,i.jsxs)(n.li,{children:["Remove from ",(0,i.jsx)(n.code,{children:".env"})]}),"\n",(0,i.jsxs)(n.li,{children:["Remove from ",(0,i.jsx)(n.code,{children:".env.example"})]}),"\n",(0,i.jsx)(n.li,{children:"Commit changes"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"variable-renamed",children:"Variable Renamed"}),"\n",(0,i.jsx)(n.p,{children:"When renaming:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Update code references"}),"\n",(0,i.jsxs)(n.li,{children:["Update ",(0,i.jsx)(n.code,{children:".env"})," key"]}),"\n",(0,i.jsxs)(n.li,{children:["Update ",(0,i.jsx)(n.code,{children:".env.example"})," key"]}),"\n",(0,i.jsx)(n.li,{children:"Commit all together"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,l){l.d(n,{R:()=>r,x:()=>t});var s=l(6540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);