"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[112],{226(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"frameworks/cra","title":"Create React App","description":"env-doctor supports Create React App (CRA) projects.","source":"@site/docs/frameworks/cra.md","sourceDirName":"frameworks","slug":"/frameworks/cra","permalink":"/env-doctor/docs/frameworks/cra","draft":false,"unlisted":false,"editUrl":"https://github.com/khushwantparihar/env-doctor/tree/main/docs/docs/frameworks/cra.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Vite","permalink":"/env-doctor/docs/frameworks/vite"},"next":{"title":"CLI Reference","permalink":"/env-doctor/docs/cli-reference"}}');var i=s(4848),t=s(8453);const c={sidebar_position:3},d="Create React App",l={},o=[{value:"Auto-Detection",id:"auto-detection",level:2},{value:"Client-Side Variables",id:"client-side-variables",level:2},{value:"Access Pattern",id:"access-pattern",level:2},{value:"Environment Files",id:"environment-files",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Auto-Ignored Variables",id:"auto-ignored-variables",level:2},{value:"TypeScript Support",id:"typescript-support",level:2},{value:"Common Issues",id:"common-issues",level:2},{value:"Missing REACT_APP_ Prefix",id:"missing-react_app_-prefix",level:3},{value:"Exposing Secrets",id:"exposing-secrets",level:3},{value:"Build-Time Inlining",id:"build-time-inlining",level:3},{value:"Testing",id:"testing",level:3},{value:"Example Configuration",id:"example-configuration",level:2},{value:"Migrating from CRA",id:"migrating-from-cra",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"create-react-app",children:"Create React App"})}),"\n",(0,i.jsx)(n.p,{children:"env-doctor supports Create React App (CRA) projects."}),"\n",(0,i.jsx)(n.h2,{id:"auto-detection",children:"Auto-Detection"}),"\n",(0,i.jsx)(n.p,{children:"env-doctor detects CRA projects by:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"react-scripts"})," in ",(0,i.jsx)(n.code,{children:"package.json"})," dependencies"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"client-side-variables",children:"Client-Side Variables"}),"\n",(0,i.jsxs)(n.p,{children:["CRA uses the ",(0,i.jsx)(n.code,{children:"REACT_APP_"})," prefix for client-accessible variables:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Not exposed (CRA ignores these)\nDATABASE_URL=postgres://...\nAPI_SECRET=secret123\n\n# Client-accessible (bundled into JavaScript)\nREACT_APP_API_URL=https://api.example.com\nREACT_APP_TITLE=My App\n"})}),"\n",(0,i.jsx)(n.h2,{id:"access-pattern",children:"Access Pattern"}),"\n",(0,i.jsxs)(n.p,{children:["CRA uses ",(0,i.jsx)(n.code,{children:"process.env"})," with the ",(0,i.jsx)(n.code,{children:"REACT_APP_"})," prefix:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// \u2705 CRA pattern\nconst apiUrl = process.env.REACT_APP_API_URL;\n\n// Built-in variables\nconst nodeEnv = process.env.NODE_ENV;  // 'development' | 'production' | 'test'\nconst publicUrl = process.env.PUBLIC_URL;  // Public URL for assets\n"})}),"\n",(0,i.jsx)(n.h2,{id:"environment-files",children:"Environment Files"}),"\n",(0,i.jsx)(n.p,{children:"CRA loads env files in this order (later files override):"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"File"}),(0,i.jsx)(n.th,{children:"Loaded When"}),(0,i.jsx)(n.th,{children:"Commit?"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".env"})}),(0,i.jsx)(n.td,{children:"Always"}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".env.local"})}),(0,i.jsx)(n.td,{children:"Always (except test)"}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".env.development"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"npm start"})}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".env.development.local"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"npm start"})}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".env.production"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"npm run build"})}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".env.production.local"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"npm run build"})}),(0,i.jsx)(n.td,{children:"No"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".env.test"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"npm test"})}),(0,i.jsx)(n.td,{children:"Yes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:".env.test.local"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"npm test"})}),(0,i.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// env-doctor.config.js\nmodule.exports = {\n  envFiles: [\n    '.env',\n    '.env.local',\n    '.env.development',\n    '.env.development.local'\n  ],\n  templateFile: '.env.example',\n  include: ['src/**/*.{ts,tsx,js,jsx}'],\n  framework: 'cra'\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"auto-ignored-variables",children:"Auto-Ignored Variables"}),"\n",(0,i.jsx)(n.p,{children:"These CRA variables are automatically ignored as unused:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"BROWSER"})," - Which browser to open"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"GENERATE_SOURCEMAP"})," - Source map generation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CI"})," - CI environment flag"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"typescript-support",children:"TypeScript Support"}),"\n",(0,i.jsx)(n.p,{children:"For TypeScript projects, define your env types:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// src/react-app-env.d.ts\ndeclare namespace NodeJS {\n  interface ProcessEnv {\n    REACT_APP_API_URL: string;\n    REACT_APP_TITLE: string;\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,i.jsx)(n.h3,{id:"missing-react_app_-prefix",children:"Missing REACT_APP_ Prefix"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Problem:"})," Variable not available in browser."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// \u274c Won't work - not exposed\nconst secret = process.env.API_SECRET;  // undefined\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix:"})," Add the prefix."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"REACT_APP_API_KEY=abc123\n"})}),"\n",(0,i.jsx)(n.h3,{id:"exposing-secrets",children:"Exposing Secrets"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Problem:"})," Secret bundled into client."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u274c Security risk - visible in browser\nREACT_APP_DATABASE_URL=postgres://user:pass@host/db\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Fix:"})," Don't expose secrets. Use a backend API instead."]}),"\n",(0,i.jsx)(n.h3,{id:"build-time-inlining",children:"Build-Time Inlining"}),"\n",(0,i.jsx)(n.p,{children:"CRA inlines env variables at build time. They're not read at runtime:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Value at BUILD time is used, not runtime\nREACT_APP_API_URL=https://api.example.com\n"})}),"\n",(0,i.jsx)(n.p,{children:"For runtime configuration, use a different approach:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// public/config.js (loaded at runtime)\nwindow.ENV = {\n  API_URL: 'https://api.example.com'\n};\n\n// Usage\nconst apiUrl = window.ENV.API_URL;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,i.jsxs)(n.p,{children:["In tests, CRA uses ",(0,i.jsx)(n.code,{children:".env.test"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# .env.test\nREACT_APP_API_URL=http://localhost:3001\n"})}),"\n",(0,i.jsx)(n.h2,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// env-doctor.config.js\nmodule.exports = {\n  envFiles: ['.env', '.env.local'],\n  templateFile: '.env.example',\n  include: ['src/**/*.{ts,tsx,js,jsx}'],\n  exclude: ['node_modules', 'build'],\n  framework: 'cra',\n  variables: {\n    REACT_APP_API_URL: {\n      required: true,\n      type: 'url'\n    },\n    REACT_APP_TITLE: {\n      required: true\n    }\n  },\n  ignore: [\n    'BROWSER',\n    'GENERATE_SOURCEMAP'\n  ]\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"migrating-from-cra",children:"Migrating from CRA"}),"\n",(0,i.jsx)(n.p,{children:"If you're migrating to Vite or Next.js:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"CRA"}),(0,i.jsx)(n.th,{children:"Vite"}),(0,i.jsx)(n.th,{children:"Next.js"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"REACT_APP_*"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VITE_*"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"NEXT_PUBLIC_*"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"process.env.REACT_APP_*"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"import.meta.env.VITE_*"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"process.env.NEXT_PUBLIC_*"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"env-doctor can help identify which variables need prefix changes during migration."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>c,x:()=>d});var r=s(6540);const i={},t=r.createContext(i);function c(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);