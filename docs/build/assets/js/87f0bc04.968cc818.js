"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[483],{2681(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"examples/custom-rules","title":"Custom Rules","description":"Create custom validation rules for your environment variables.","source":"@site/docs/examples/custom-rules.md","sourceDirName":"examples","slug":"/examples/custom-rules","permalink":"/env-doctor/docs/examples/custom-rules","draft":false,"unlisted":false,"editUrl":"https://github.com/khushwantparihar/env-doctor/tree/main/docs/docs/examples/custom-rules.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Monorepo Setup","permalink":"/env-doctor/docs/examples/monorepo"}}');var s=r(4848),a=r(8453);const t={sidebar_position:3},o="Custom Rules",l={},c=[{value:"Variable Rules",id:"variable-rules",level:2},{value:"Ignore Patterns",id:"ignore-patterns",level:2},{value:"Custom Secret Patterns",id:"custom-secret-patterns",level:2},{value:"Framework-Specific Rules",id:"framework-specific-rules",level:2},{value:"Next.js Public Variables",id:"nextjs-public-variables",level:3},{value:"Vite Configuration",id:"vite-configuration",level:3},{value:"Conditional Validation",id:"conditional-validation",level:2},{value:"Dynamic Configuration",id:"dynamic-configuration",level:2},{value:"Extending Configurations",id:"extending-configurations",level:2},{value:"Validation Examples",id:"validation-examples",level:2},{value:"AWS Region Format",id:"aws-region-format",level:3},{value:"Semantic Version",id:"semantic-version",level:3},{value:"Base64 Encoded",id:"base64-encoded",level:3},{value:"UUID Format",id:"uuid-format",level:3},{value:"IP Address",id:"ip-address",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"custom-rules",children:"Custom Rules"})}),"\n",(0,s.jsx)(n.p,{children:"Create custom validation rules for your environment variables."}),"\n",(0,s.jsx)(n.h2,{id:"variable-rules",children:"Variable Rules"}),"\n",(0,s.jsx)(n.p,{children:"Define rules for specific variables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// env-doctor.config.js\nmodule.exports = {\n  variables: {\n    // Required with pattern\n    DATABASE_URL: {\n      required: true,\n      secret: true,\n      pattern: /^postgres:\\/\\//,\n      description: 'PostgreSQL connection string'\n    },\n    \n    // Numeric with default\n    PORT: {\n      type: 'number',\n      default: 3000\n    },\n    \n    // Enum validation\n    NODE_ENV: {\n      required: true,\n      enum: ['development', 'production', 'test', 'staging']\n    },\n    \n    // URL validation\n    API_URL: {\n      required: true,\n      type: 'url',\n      pattern: /^https:\\/\\//  // Must be HTTPS\n    },\n    \n    // Email validation\n    ADMIN_EMAIL: {\n      required: true,\n      type: 'email'\n    },\n    \n    // JSON validation\n    FEATURE_FLAGS: {\n      type: 'json'\n    },\n    \n    // Boolean\n    DEBUG: {\n      type: 'boolean',\n      default: false\n    }\n  }\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"ignore-patterns",children:"Ignore Patterns"}),"\n",(0,s.jsx)(n.p,{children:"Ignore specific issues:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  ignore: [\n    // Ignore all LEGACY_ variables\n    'LEGACY_*',\n    \n    // Ignore TEST_ variables\n    'TEST_*',\n    \n    // Ignore unused DEBUG\n    'unused:DEBUG',\n    \n    // Ignore missing for optional vars\n    'missing:OPTIONAL_*',\n    \n    // Ignore type mismatch for flexible var\n    'type-mismatch:FLEXIBLE_VAR',\n    \n    // Ignore secret detection for test tokens\n    'secret:TEST_TOKEN'\n  ]\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"custom-secret-patterns",children:"Custom Secret Patterns"}),"\n",(0,s.jsx)(n.p,{children:"Add patterns for internal secrets:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  secretPatterns: [\n    // Company-specific patterns\n    /^ACME_SECRET_/,\n    /^INTERNAL_TOKEN_/,\n    \n    // Custom API key formats\n    /^myservice_[a-z0-9]{32}$/i\n  ]\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"framework-specific-rules",children:"Framework-Specific Rules"}),"\n",(0,s.jsx)(n.h3,{id:"nextjs-public-variables",children:"Next.js Public Variables"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  framework: 'nextjs',\n  variables: {\n    // Client-side analytics\n    NEXT_PUBLIC_GA_ID: {\n      required: true,\n      pattern: /^(UA-|G-)/\n    },\n    \n    // API endpoints\n    NEXT_PUBLIC_API_URL: {\n      required: true,\n      type: 'url'\n    }\n  }\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"vite-configuration",children:"Vite Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  framework: 'vite',\n  variables: {\n    VITE_APP_TITLE: {\n      required: true\n    },\n    VITE_API_BASE: {\n      required: true,\n      type: 'url'\n    }\n  }\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"conditional-validation",children:"Conditional Validation"}),"\n",(0,s.jsx)(n.p,{children:"Use pattern matching for conditional rules:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  variables: {\n    // Production requires specific format\n    DATABASE_URL: {\n      required: true,\n      pattern: process.env.NODE_ENV === 'production'\n        ? /^postgres:\\/\\/.*@.*\\.amazonaws\\.com/  // AWS RDS\n        : /^postgres:\\/\\//  // Any postgres URL\n    }\n  }\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"dynamic-configuration",children:"Dynamic Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Export a function for dynamic config:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// env-doctor.config.js\nmodule.exports = async () => {\n  const isProduction = process.env.NODE_ENV === 'production';\n  \n  return {\n    envFiles: isProduction\n      ? ['.env', '.env.production']\n      : ['.env', '.env.local'],\n    \n    strict: isProduction,\n    \n    variables: {\n      DATABASE_URL: {\n        required: true,\n        pattern: isProduction\n          ? /^postgres:\\/\\/.*:.*@.*\\.amazonaws\\.com/\n          : undefined\n      }\n    }\n  };\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"extending-configurations",children:"Extending Configurations"}),"\n",(0,s.jsx)(n.p,{children:"Share base config across projects:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// base.config.js\nmodule.exports = {\n  exclude: ['node_modules', 'dist', '**/*.test.*'],\n  variables: {\n    NODE_ENV: {\n      enum: ['development', 'production', 'test']\n    },\n    LOG_LEVEL: {\n      enum: ['debug', 'info', 'warn', 'error']\n    }\n  }\n};\n\n// env-doctor.config.js\nconst baseConfig = require('./base.config');\n\nmodule.exports = {\n  ...baseConfig,\n  envFiles: ['.env', '.env.local'],\n  framework: 'nextjs',\n  variables: {\n    ...baseConfig.variables,\n    DATABASE_URL: {\n      required: true,\n      secret: true\n    }\n  }\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"validation-examples",children:"Validation Examples"}),"\n",(0,s.jsx)(n.h3,{id:"aws-region-format",children:"AWS Region Format"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"AWS_REGION: {\n  required: true,\n  pattern: /^[a-z]{2}-[a-z]+-\\d$/  // e.g., us-east-1\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"semantic-version",children:"Semantic Version"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"APP_VERSION: {\n  pattern: /^\\d+\\.\\d+\\.\\d+$/  // e.g., 1.2.3\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"base64-encoded",children:"Base64 Encoded"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"ENCODED_KEY: {\n  pattern: /^[A-Za-z0-9+/]+=*$/\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"uuid-format",children:"UUID Format"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"INSTANCE_ID: {\n  pattern: /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ip-address",children:"IP Address"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"SERVER_IP: {\n  pattern: /^(\\d{1,3}\\.){3}\\d{1,3}$/\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>t,x:()=>o});var i=r(6540);const s={},a=i.createContext(s);function t(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);