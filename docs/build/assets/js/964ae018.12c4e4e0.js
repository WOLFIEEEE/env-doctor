"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[443],{3588(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"api-reference","title":"API Reference","description":"Use env-doctor programmatically in your Node.js applications.","source":"@site/docs/api-reference.md","sourceDirName":".","slug":"/api-reference","permalink":"/env-doctor/docs/api-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/khushwantparihar/env-doctor/tree/main/docs/docs/api-reference.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11},"sidebar":"docsSidebar","previous":{"title":"CLI Reference","permalink":"/env-doctor/docs/cli-reference"},"next":{"title":"CI/CD Integration","permalink":"/env-doctor/docs/ci-integration"}}');var o=r(4848),i=r(8453);const t={sidebar_position:11},a="API Reference",c={},l=[{value:"Installation",id:"installation",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Core Functions",id:"core-functions",level:2},{value:"<code>analyze(options)</code>",id:"analyzeoptions",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns",level:4},{value:"<code>loadConfig(configPath?, rootDir?)</code>",id:"loadconfigconfigpath-rootdir",level:3},{value:"Returns",id:"returns-1",level:4},{value:"Scanners",id:"scanners",level:2},{value:"<code>parseEnvFile(filePath, rootDir?)</code>",id:"parseenvfilefilepath-rootdir",level:3},{value:"Returns",id:"returns-2",level:4},{value:"<code>scanCode(options)</code>",id:"scancodeoptions",level:3},{value:"Returns",id:"returns-3",level:4},{value:"<code>scanGitHistory(options)</code>",id:"scangithistoryoptions",level:3},{value:"Analyzers",id:"analyzers",level:2},{value:"<code>analyzeMissing(options)</code>",id:"analyzemissingoptions",level:3},{value:"<code>analyzeUnused(options)</code>",id:"analyzeunusedoptions",level:3},{value:"<code>analyzeTypeMismatch(options)</code>",id:"analyzetypemismatchoptions",level:3},{value:"<code>analyzeSecrets(options)</code>",id:"analyzesecretsoptions",level:3},{value:"<code>analyzeSyncDrift(options)</code>",id:"analyzesyncdriftoptions",level:3},{value:"Reporters",id:"reporters",level:2},{value:"<code>reportToConsole(result, options?)</code>",id:"reporttoconsoleresult-options",level:3},{value:"<code>reportToJSON(result)</code>",id:"reporttojsonresult",level:3},{value:"<code>reportToSARIF(result)</code>",id:"reporttosarifresult",level:3},{value:"Framework Detection",id:"framework-detection",level:2},{value:"<code>detectFramework(rootDir)</code>",id:"detectframeworkrootdir",level:3},{value:"<code>getFrameworkInfo(framework)</code>",id:"getframeworkinfoframework",level:3},{value:"Types",id:"types",level:2},{value:"<code>EnvDoctorConfig</code>",id:"envdoctorconfig",level:3},{value:"<code>VariableRule</code>",id:"variablerule",level:3},{value:"<code>Issue</code>",id:"issue",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"api-reference",children:"API Reference"})}),"\n",(0,o.jsx)(n.p,{children:"Use env-doctor programmatically in your Node.js applications."}),"\n",(0,o.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install env-doctor\n"})}),"\n",(0,o.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { analyze, loadConfig } from 'env-doctor';\n\nconst { config } = await loadConfig();\nconst result = await analyze({ config });\n\nconsole.log(`Found ${result.issues.length} issues`);\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"core-functions",children:"Core Functions"}),"\n",(0,o.jsx)(n.h3,{id:"analyzeoptions",children:(0,o.jsx)(n.code,{children:"analyze(options)"})}),"\n",(0,o.jsx)(n.p,{children:"Main analysis function that orchestrates all scanners and analyzers."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { analyze } from 'env-doctor';\n\nconst result = await analyze({\n  config: {\n    envFiles: ['.env'],\n    include: ['src/**/*.ts'],\n    framework: 'nextjs'\n  },\n  verbose: true\n});\n"})}),"\n",(0,o.jsx)(n.h4,{id:"parameters",children:"Parameters"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Parameter"}),(0,o.jsx)(n.th,{children:"Type"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"options.config"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"EnvDoctorConfig"})}),(0,o.jsx)(n.td,{children:"Configuration object"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"options.verbose"})}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"boolean"})}),(0,o.jsx)(n.td,{children:"Enable debug logging"})]})]})]}),"\n",(0,o.jsx)(n.h4,{id:"returns",children:"Returns"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"Promise<AnalysisResult>"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"interface AnalysisResult {\n  issues: Issue[];\n  definedVariables: EnvVariable[];\n  usedVariables: EnvUsage[];\n  templateVariables?: EnvVariable[];\n  framework: string;\n  stats: ScanStats;\n}\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"loadconfigconfigpath-rootdir",children:(0,o.jsx)(n.code,{children:"loadConfig(configPath?, rootDir?)"})}),"\n",(0,o.jsx)(n.p,{children:"Load configuration from file or use defaults."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { loadConfig } from 'env-doctor';\n\n// Load from default locations\nconst { config, configPath } = await loadConfig();\n\n// Load from specific file\nconst { config } = await loadConfig('./custom-config.js');\n\n// Load with custom root directory\nconst { config } = await loadConfig(undefined, '/path/to/project');\n"})}),"\n",(0,o.jsx)(n.h4,{id:"returns-1",children:"Returns"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"{\n  config: EnvDoctorConfig;\n  configPath?: string;  // Path if config was found\n}\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"scanners",children:"Scanners"}),"\n",(0,o.jsx)(n.h3,{id:"parseenvfilefilepath-rootdir",children:(0,o.jsx)(n.code,{children:"parseEnvFile(filePath, rootDir?)"})}),"\n",(0,o.jsxs)(n.p,{children:["Parse a single ",(0,o.jsx)(n.code,{children:".env"})," file."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { parseEnvFile } from 'env-doctor';\n\nconst result = await parseEnvFile('.env', process.cwd());\n\nfor (const variable of result.variables) {\n  console.log(`${variable.name}=${variable.isSecret ? '[REDACTED]' : variable.value}`);\n}\n"})}),"\n",(0,o.jsx)(n.h4,{id:"returns-2",children:"Returns"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"interface ParseResult {\n  variables: EnvVariable[];\n  errors: Array<{ line: number; message: string }>;\n}\n\ninterface EnvVariable {\n  name: string;\n  value: string;\n  line: number;\n  file: string;\n  isSecret?: boolean;\n}\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"scancodeoptions",children:(0,o.jsx)(n.code,{children:"scanCode(options)"})}),"\n",(0,o.jsxs)(n.p,{children:["Scan source files for ",(0,o.jsx)(n.code,{children:"process.env"})," usage."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { scanCode } from 'env-doctor';\n\nconst result = await scanCode({\n  rootDir: process.cwd(),\n  include: ['src/**/*.ts'],\n  exclude: ['node_modules'],\n  framework: 'nextjs'\n});\n\nconsole.log(`Found ${result.usages.length} env usages`);\n"})}),"\n",(0,o.jsx)(n.h4,{id:"returns-3",children:"Returns"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"interface CodeScanResult {\n  usages: EnvUsage[];\n  errors: Array<{ file: string; message: string }>;\n  filesScanned: number;\n}\n\ninterface EnvUsage {\n  name: string;\n  file: string;\n  line: number;\n  column: number;\n  accessPattern: 'direct' | 'bracket' | 'destructure' | 'dynamic';\n  inferredType?: 'string' | 'number' | 'boolean' | 'json' | 'array';\n  isClientSide?: boolean;\n}\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"scangithistoryoptions",children:(0,o.jsx)(n.code,{children:"scanGitHistory(options)"})}),"\n",(0,o.jsx)(n.p,{children:"Scan git history for leaked secrets."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { scanGitHistory } from 'env-doctor';\n\nconst { results, error } = await scanGitHistory({\n  rootDir: process.cwd(),\n  depth: 100\n});\n\nif (results.length > 0) {\n  console.warn('Found secrets in git history!');\n}\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"analyzers",children:"Analyzers"}),"\n",(0,o.jsx)(n.h3,{id:"analyzemissingoptions",children:(0,o.jsx)(n.code,{children:"analyzeMissing(options)"})}),"\n",(0,o.jsx)(n.p,{children:"Find variables used but not defined."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { analyzeMissing } from 'env-doctor';\n\nconst issues = analyzeMissing({\n  definedVariables: envVars,\n  usedVariables: codeUsages,\n  config\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"analyzeunusedoptions",children:(0,o.jsx)(n.code,{children:"analyzeUnused(options)"})}),"\n",(0,o.jsx)(n.p,{children:"Find variables defined but not used."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { analyzeUnused } from 'env-doctor';\n\nconst issues = analyzeUnused({\n  definedVariables: envVars,\n  usedVariables: codeUsages,\n  config,\n  framework: 'nextjs'\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"analyzetypemismatchoptions",children:(0,o.jsx)(n.code,{children:"analyzeTypeMismatch(options)"})}),"\n",(0,o.jsx)(n.p,{children:"Find type mismatches between usage and values."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { analyzeTypeMismatch } from 'env-doctor';\n\nconst issues = analyzeTypeMismatch({\n  definedVariables: envVars,\n  usedVariables: codeUsages,\n  config\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"analyzesecretsoptions",children:(0,o.jsx)(n.code,{children:"analyzeSecrets(options)"})}),"\n",(0,o.jsx)(n.p,{children:"Detect exposed secrets."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { analyzeSecrets } from 'env-doctor';\n\nconst issues = analyzeSecrets({\n  variables: envVars,\n  customPatterns: [/^MY_SECRET/],\n  ignorePatterns: ['TEST_*']\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"analyzesyncdriftoptions",children:(0,o.jsx)(n.code,{children:"analyzeSyncDrift(options)"})}),"\n",(0,o.jsx)(n.p,{children:"Check sync between env and template files."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { analyzeSyncDrift } from 'env-doctor';\n\nconst result = analyzeSyncDrift({\n  envVariables: envVars,\n  templateVariables: templateVars,\n  templateFile: '.env.example'\n});\n\nconsole.log(`In sync: ${result.inSync}`);\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"reporters",children:"Reporters"}),"\n",(0,o.jsx)(n.h3,{id:"reporttoconsoleresult-options",children:(0,o.jsx)(n.code,{children:"reportToConsole(result, options?)"})}),"\n",(0,o.jsx)(n.p,{children:"Output results to console with formatting."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { analyze, reportToConsole } from 'env-doctor';\n\nconst result = await analyze({ config });\nreportToConsole(result, { verbose: true });\n"})}),"\n",(0,o.jsx)(n.h3,{id:"reporttojsonresult",children:(0,o.jsx)(n.code,{children:"reportToJSON(result)"})}),"\n",(0,o.jsx)(n.p,{children:"Get results as formatted JSON string."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { analyze, reportToJSON } from 'env-doctor';\n\nconst result = await analyze({ config });\nconst json = reportToJSON(result);\nfs.writeFileSync('report.json', json);\n"})}),"\n",(0,o.jsx)(n.h3,{id:"reporttosarifresult",children:(0,o.jsx)(n.code,{children:"reportToSARIF(result)"})}),"\n",(0,o.jsx)(n.p,{children:"Get results in SARIF format for GitHub."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { analyze, reportToSARIF } from 'env-doctor';\n\nconst result = await analyze({ config });\nconst sarif = reportToSARIF(result);\nfs.writeFileSync('results.sarif', sarif);\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"framework-detection",children:"Framework Detection"}),"\n",(0,o.jsx)(n.h3,{id:"detectframeworkrootdir",children:(0,o.jsx)(n.code,{children:"detectFramework(rootDir)"})}),"\n",(0,o.jsx)(n.p,{children:"Auto-detect the framework used."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { detectFramework } from 'env-doctor';\n\nconst framework = await detectFramework(process.cwd());\n// Returns: 'nextjs' | 'vite' | 'cra' | 'node'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"getframeworkinfoframework",children:(0,o.jsx)(n.code,{children:"getFrameworkInfo(framework)"})}),"\n",(0,o.jsx)(n.p,{children:"Get detailed framework information."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"import { getFrameworkInfo } from 'env-doctor';\n\nconst info = getFrameworkInfo('nextjs');\n// {\n//   name: 'nextjs',\n//   displayName: 'Next.js',\n//   clientPrefix: ['NEXT_PUBLIC_'],\n//   ...\n// }\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"types",children:"Types"}),"\n",(0,o.jsx)(n.h3,{id:"envdoctorconfig",children:(0,o.jsx)(n.code,{children:"EnvDoctorConfig"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"interface EnvDoctorConfig {\n  envFiles: string[];\n  templateFile?: string;\n  include: string[];\n  exclude: string[];\n  framework: 'auto' | 'nextjs' | 'vite' | 'cra' | 'node';\n  variables: Record<string, VariableRule>;\n  ignore: string[];\n  strict?: boolean;\n  secretPatterns?: RegExp[];\n  root?: string;\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"variablerule",children:(0,o.jsx)(n.code,{children:"VariableRule"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"interface VariableRule {\n  required?: boolean;\n  secret?: boolean;\n  type?: 'string' | 'number' | 'boolean' | 'json' | 'url' | 'email';\n  pattern?: RegExp;\n  default?: string | number | boolean;\n  enum?: string[];\n  description?: string;\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"issue",children:(0,o.jsx)(n.code,{children:"Issue"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"interface Issue {\n  type: IssueType;\n  severity: 'error' | 'warning' | 'info';\n  variable: string;\n  message: string;\n  location?: SourceLocation;\n  fix?: string;\n  context?: Record<string, unknown>;\n}\n\ntype IssueType = \n  | 'missing'\n  | 'unused'\n  | 'type-mismatch'\n  | 'sync-drift'\n  | 'secret-exposed'\n  | 'invalid-value'\n  | 'dynamic-access';\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>t,x:()=>a});var s=r(6540);const o={},i=s.createContext(o);function t(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);